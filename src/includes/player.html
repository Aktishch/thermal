<% var compositions = [
  {
    artist: 'Slipknot',
    song: 'Snuff'
  },
  {
    artist: 'System of a down',
    song: 'Lonely Day'
  },
  {
    artist: 'Scorpions',
    song: 'Slave Me'
  }
] %>

<section class="container player container-xs bg-grey dark:bg-dark" data-player="random" id="player">
  <dialog class="max-w-sm p-5 dark:bg-black dark:text-white rounded-xl md:p-10" id="playlist">
    <h4 class="mb-6 text-3xl font-bold text-center font-alt">Playlist</h4>
    <div class="flex flex-col gap-4">
      <% _.forEach((compositions), (item, key) => { %>
      <div class="flex items-center gap-2">
        <button class="text-4xl rounded-full size-10 btn btn-primary btn-fade" data-player-composition="<%= key %>" data-waved="dark">
          <%= icon({id: 'loading', className: 'icon hidden player__loading', data: 'data-player-loading'}) %>
          <%= icon({id: 'play', className: 'icon', data: 'data-player-status'}) %>
        </button>
        <div class="flex flex-col">
          <span class="text-xl font-semibold"><%= item.artist %></span>
          <span class="text-base opacity-70"><%= item.song %></span>
        </div>
      </div>
      <% }) %>
    </div>
  </dialog>
  <div class="flex flex-col items-center justify-center w-full max-w-lg px-2 py-6 mx-auto bg-white shadow-md dark:bg-black rounded-3xl md:px-6 anim anim-up" data-anim data-player-controls>
    <div class="w-full mb-5 rounded-full pack pack-xl bg-grey dark:bg-dark max-w-64 md:md-8">
      <%= loader %>
      <%= picture({src: '', format: '', className: 'image', data: 'data-player-poster'}) %>
    </div>
    <h3 class="font-bold text-center text-2xl/normal font-alt md:text-3xl/normal" data-player-artist></h3>
    <h4 class="mb-6 text-base font-medium text-center md:text-2xl" data-player-song></h4>
    <audio class="hidden" data-player-audio src=""></audio>
    <div class="w-full px-3 py-5 bg-grey dark:bg-dark rounded-2xl md:px-5">
      <div class="relative w-full h-1 mb-3 pointer-events-auto bg-gray rounded-3xl" data-player-progress>
        <div class="absolute top-0 bottom-0 left-0 h-full bg-primary text-primary rounded-3xl after:content-auto after:absolute after:top-0 after:bottom-0 after:-right-1 after:bg-current after:rounded-full after:size-3 after:my-auto" data-player-range></div>
      </div>
      <div class="flex items-center justify-between gap-4">
        <button class="p-1 rounded btn btn-primary btn-fade" data-waved="dark" data-fancybox-dialog data-src="#playlist">
          <%= icon({id: 'burger', className: 'icon text-2xl', data: null}) %>
        </button>
        <span class="hidden w-12 text-lg md:block" data-player-start></span>
        <button class="rounded-full size-10 btn btn-primary btn-fade" data-player-prev data-waved="dark">
          <%= icon({id: 'arrow-prev', className: 'icon text-xl', data: null}) %>
        </button>
        <button class="text-4xl rounded-full size-10 btn btn-primary btn-fade" data-player-play data-waved="dark">
          <%= icon({id: 'loading', className: 'icon hidden player__loading', data: 'data-player-loading'}) %>
          <%= icon({id: 'play', className: 'icon', data: 'data-player-status'}) %>
        </button>
        <button class="rounded-full size-10 btn btn-primary btn-fade" data-player-next data-waved="dark">
          <%= icon({id: 'arrow-next', className: 'icon text-xl', data: null}) %>
        </button>
        <span class="hidden w-12 text-lg md:block" data-player-end></span>
        <button class="p-2 rounded-full btn btn-primary btn-fade" data-player-volume data-waved="dark">
          <%= icon({id: 'volume-on', className: 'icon', data: null}) %>
        </button>
      </div>
    </div>
  </div>
</section>